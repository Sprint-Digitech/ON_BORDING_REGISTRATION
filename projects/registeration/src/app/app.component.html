<router-outlet></router-outlet>
<div class="signup-container">
  <div class="step-indicator">
    <div class="step"
      [ngClass]="{'step-active': getStepState(1) === 'edit', 'step-completed': getStepState(1) === 'done'}">
      <div class="step-icon">
        <mat-icon *ngIf="getStepState(1) === 'done'">check</mat-icon>
        <span *ngIf="getStepState(1) !== 'done'">1</span>
      </div>
      <span class="step-label">Account</span>
    </div>
    <div class="step-divider" [style.background-color]="getStepState(1) === 'done' ? '#4caf50' : '#e0e0e0'"></div>

    <div class="step"
      [ngClass]="{'step-active': getStepState(2) === 'edit', 'step-completed': getStepState(2) === 'done'}">
      <div class="step-icon">
        <mat-icon *ngIf="getStepState(2) === 'done'">check</mat-icon>
        <span *ngIf="getStepState(2) !== 'done'">2</span>
      </div>
      <span class="step-label">Company</span>
    </div>
    <div class="step-divider" [style.background-color]="getStepState(2) === 'done' ? '#4caf50' : '#e0e0e0'"></div>

    <div class="step"
      [ngClass]="{'step-active': getStepState(3) === 'edit', 'step-completed': getStepState(3) === 'done'}">
      <div class="step-icon">
        <mat-icon *ngIf="getStepState(3) === 'done'">check</mat-icon>
        <span *ngIf="getStepState(3) !== 'done'">3</span>
      </div>
      <span class="step-label">Review</span>
    </div>
    <!-- <div class="step-divider"></div>

    <div class="step"
      [ngClass]="{'step-active': getStepState(4) === 'edit', 'step-completed': getStepState(4) === 'done'}">
      <div class="step-icon">
        <mat-icon *ngIf="getStepState(4) === 'done'">check</mat-icon>
        <span *ngIf="getStepState(4) !== 'done'">4</span>
      </div>
      <span class="step-label">Review</span>
    </div> -->
  </div>

  <!-- Account Step -->
<div *ngIf="currentStep === 1 && !isCompleted" class="step-content">
      <div class="text-center">
        <img src="../assets/img/fovesta.png" alt="Fovestta HR Software" class="logo-img" style="height: 60px;" />
      </div>
  <h2>Create your account</h2>
  <p class="step-subtitle">Start your 30-day free trial - no credit card required</p>

  <form [formGroup]="accountFormGroup" class="two-column-form">
    <!-- Two-column layout -->
    <mat-form-field appearance="outline" class="col-span-1">
      <mat-label>First Name</mat-label>
      <input matInput formControlName="firstName" required>
      <mat-error>First Name is required</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="col-span-1">
      <mat-label>Last Name</mat-label>
      <input matInput formControlName="lastName" required>
      <mat-error>Last Name is required</mat-error>
    </mat-form-field>

    <!-- <mat-form-field appearance="outline" class="full-width">
      <mat-label>Full name</mat-label>
      <input matInput formControlName="name" required>
      <mat-error>Name is required</mat-error>
    </mat-form-field> -->

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Work Email</mat-label>
      <input matInput formControlName="email" required>
      <mat-error>Valid email is required</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="col-span-1">
      <mat-label>Phone number</mat-label>
      <input type="number" matInput formControlName="phoneNumber" required>
      <mat-error>Phone number is required</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="col-span-1">
      <mat-label>Company Name</mat-label>
      <input matInput formControlName="companyName" required>
      <mat-error>Company Name is required</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="col-span-1">
      <mat-label>Number of Employees</mat-label>
      <mat-select formControlName="employeeCount" required>
        <mat-option *ngFor="let count of employeeCountOptions" [value]="count">
          {{count}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="col-span-1">
      <mat-label>Designation</mat-label>
      <input matInput formControlName="designationName" required>
      <mat-error>Designation is required</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Password</mat-label>
      <input matInput [type]="showPassword ? 'text' : 'password'" formControlName="password" required>
      <button mat-icon-button matSuffix (click)="togglePasswordVisibility('current')">
        <mat-icon>{{ showPassword ? 'visibility' : 'visibility_off' }}</mat-icon>
      </button>
      <mat-error>At least 8 characters required</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Confirm Password</mat-label>
      <input matInput [type]="showConfirmPassword ? 'text' : 'password'" formControlName="confirmPassword" required>
      <button mat-icon-button matSuffix (click)="togglePasswordVisibility('confirm')">
        <mat-icon>{{ showConfirmPassword ? 'visibility' : 'visibility_off' }}</mat-icon>
      </button>
      <mat-error>Passwords must match</mat-error>
    </mat-form-field>

    <div class="button-row full-width" style="margin-top: 0px;">
      <button mat-flat-button color="primary" class="email-button" 
        (click)="nextStep()" [disabled]="!accountFormGroup.valid">
        Continue with Email
      </button>
    </div>
  </form>

    <div class="trial-features">
      <p>Your 30-day free trial includes:</p>
      <div class="features-grid">
        <div class="feature-item">
          <mat-icon>people</mat-icon>
          <span>Multi-company management</span>
        </div>
        <div class="feature-item">
          <mat-icon>description</mat-icon>
          <span>Group features</span>
        </div>
        <div class="feature-item">
          <mat-icon>support</mat-icon>
          <span>Premium support</span>
        </div>
      </div>
    </div>
  </div>

<!-- Company Step -->
<div *ngIf="currentStep === 2 && !isCompleted" class="step-content">
  <h2>Company Details</h2>
  <p class="step-subtitle">Tell us about your company</p>

  <form [formGroup]="companyFormGroup" class="two-column-form">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Industry</mat-label>
      <mat-select formControlName="industry" required>
        <mat-option *ngFor="let industry of industryOptions" [value]="industry">
          {{industry}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <h2 class="full-width">Date & Time Settings</h2>
    <p class="step-subtitle full-width">Select your time zone and date format</p>

    <mat-form-field appearance="outline" class="col-span-1">
      <mat-label>Date Format</mat-label>
       <mat-select id="dateFormat" placeholder="Select Date Format" formControlName="dateFormat">
          <mat-option value="DD/MM/YYYY">DD/MM/YYYY</mat-option>
          <mat-option value="MM/DD/YYYY">MM/DD/YYYY</mat-option>
          <mat-option value="YYYY/DD/MM">YYYY.DD.MM</mat-option>
          <mat-option value="YYYY/DD/MM">DD.MM.YYYY</mat-option>
          <mat-option value="DD-MM-YYYY">DD-MMM-YYYY</mat-option>
          <mat-option value="YYYY/DD/MM">YYYY-DD-MM</mat-option>
          <mat-option value="YYYY/MM/DD">YYYY/MM/DD</mat-option>
          <mat-option value="DD/MM/YY">DD/MM/YY</mat-option>
        </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="col-span-1">
      <mat-label>Date Field Separator</mat-label>
      <mat-select formControlName="tDateFieldSeperator">
          <mat-option value="/"> / </mat-option>
          <mat-option value="-"> - </mat-option>
          <mat-option value="."> . </mat-option>
        </mat-select>

    </mat-form-field>

    <mat-form-field appearance="outline" class="col-span-1">
      <mat-label>Time Format</mat-label>
     <mat-select id="timeFormat" formControlName="timeformat">
          <mat-option value="12-hour">12-hour</mat-option>
          <mat-option value="24-hour">24-hour</mat-option>
        </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="col-span-1">
      <mat-label>Timezone</mat-label>
      <mat-select formControlName="timezone">
          <mat-option value="UTC (Coordinated Universal Time)">UTC (Coordinated Universal Time)</mat-option>
          <mat-option value="GMT (Greenwich Mean Time)">GMT (Greenwich Mean Time)</mat-option>
          <mat-option value="IST (Indian Standard Time, UTC+5:30)">IST (Indian Standard Time, UTC+5:30)</mat-option>
          <mat-option value="ICT (Indochina Time - UTC+7:00)">ICT (Indochina Time - UTC+7:00)</mat-option>
          <mat-option value="BST (Bangladesh Standard Time, UTC+6:00)">BST (Bangladesh Standard Time, UTC+6:00)</mat-option>
          <mat-option value="CST (China Standard Time, UTC+8:00)">CST (China Standard Time, UTC+8:00)</mat-option>
          <mat-option value="SGT (Singapore Time, UTC+8:00)">SGT (Singapore Time, UTC+8:00)</mat-option>
        </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Time Display Format</mat-label>
      <mat-select placeholder="Select Separator" formControlName="displayFormat">
          <mat-option value="Hours:Minutes:Seconds">Hours:Minutes:Seconds</mat-option>
          <mat-option value="Hours:Minutes">Hours:Minutes</mat-option>
        </mat-select>
    </mat-form-field>

    <div class="button-row full-width" style="margin-top: 0px;">
      <button mat-stroked-button (click)="prevStep()" class="back-button">
        Back
      </button>
      <button mat-flat-button color="primary" class="continue-button"
        (click)="nextStep()" [disabled]="!companyFormGroup.valid">
        Save & Next
      </button>
    </div>
  </form>

  <div class="trial-features">
      <p>Your 30-day free trial includes:</p>
      <div class="features-grid">
        <div class="feature-item">
          <mat-icon>people</mat-icon>
          <span>Multi-company management</span>
        </div>
        <div class="feature-item">
          <mat-icon>description</mat-icon>
          <span>Group features</span>
        </div>
        <div class="feature-item">
          <mat-icon>support</mat-icon>
          <span>Premium support</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Package Step -->
  <!-- <div *ngIf="currentStep === 3 && !isCompleted" class="step-content">
    <h2>Choose your package</h2>
    <p class="step-subtitle">Select the package that best fits your needs</p>

    <form [formGroup]="packageFormGroup">
      <div class="package-options">
        <div class="package-card" [ngClass]="{'selected': selectedPackage === 'starter'}"
          (click)="selectPackage('starter')">
          <h3>Starter Package</h3>
          <ul>
            <li>Up to 50 employees</li>
            <li>Core HR features</li>
            <li>Basic reporting</li>
          </ul>
        </div>

        <div class="package-card" [ngClass]="{'selected': selectedPackage === 'professional'}"
          (click)="selectPackage('professional')">
          <h3>Professional Package</h3>
          <ul>
            <li>Up to 200 employees</li>
            <li>Advanced features</li>
            <li>Custom reporting</li>
            <li>Multi-company dashboard</li>
          </ul>
        </div>

        <div class="package-card" [ngClass]="{'selected': selectedPackage === 'enterprise'}"
          (click)="selectPackage('enterprise')">
          <h3>Enterprise Package</h3>
          <ul>
            <li>Unlimited employees</li>
            <li>Premium features</li>
            <li>Advanced analytics</li>
            <li>Priority support</li>
            <li>Custom solutions</li>
          </ul>
        </div>
      </div>

      <div class="button-row">
        <button mat-stroked-button (click)="prevStep()" class="back-button">
          Back
        </button>
        <button mat-flat-button color="primary" class="continue-button" (click)="nextStep()" [disabled]="!packageFormGroup.valid">
          Save & Next
        </button>
      </div>
    </form>
  </div> -->

  <!-- Review Step -->
  <div *ngIf="currentStep === 3 && !isCompleted" class="step-content">
    <div class="d-flex justify-content-center align-items-center">
    <h2>Welcome to HRIS!</h2>
    <div class="success-check">
      <mat-icon>check_circle</mat-icon>
    </div>
   </div>
    <h2>Review & Confirm</h2>
    <!-- <p class="step-subtitle">Review your information</p> -->

    <div class="review-info">
      <ul>
        <!-- <li><strong>Name:</strong> {{accountFormGroup.get('firstName')?.value}} {{accountFormGroup.get('lastName')?.value}}</li> -->
        <li><strong>First Name:</strong> {{accountFormGroup.get('firstName')?.value}}</li>
        <li><strong>Last Name:</strong> {{accountFormGroup.get('lastName')?.value}}</li>
        <li><strong>Email:</strong> {{accountFormGroup.get('email')?.value}}</li>
        <!-- <li><strong>CompanyGroup:</strong> {{companyFormGroup.get('companyGroup')?.value}}</li> -->
        <li><strong>Company:</strong> {{accountFormGroup.get('companyName')?.value}}</li>
        <li><strong>Industry:</strong> {{companyFormGroup.get('industry')?.value}}</li>
        <!-- <li><strong>Size:</strong> {{companyFormGroup.get('employeeCount')?.value}}</li> -->
        <!-- <li><strong>Package:</strong> {{packageFormGroup.get('package')?.value}}</li> -->
      </ul>
    </div>

    <form [formGroup]="reviewFormGroup">
<mat-checkbox formControlName="confirmTerms" class="terms-checkbox">
  I agree to the 
  <a href="#" (click)="openTermsModal(); $event.preventDefault()" class="terms-link">Terms of Service</a> 
  and 
  <a href="#" (click)="openPrivacyModal(); $event.preventDefault()" class="terms-link">Privacy Policy</a>
</mat-checkbox>
<!-- Terms of Service Modal -->
<div class="modal-overlay" *ngIf="showTermsModal" (click)="closeTermsModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Terms of Service</h2>
      <button class="close-button" (click)="closeTermsModal()">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div class="modal-body">
      <div class="text-center mb-6">
        <img src="../assets/img/fovesta.png" alt="Fovestta HR Software" class="logo-img" />
        <p class="last-updated">Last updated: {{getCurrentDate()}}</p>
      </div>

      <section class="modal-section">
        <h3>1. Acceptance of Terms</h3>
        <p>
          By accessing and using Fovestta HR Software ("Service"), you accept and agree to be bound by the terms and
          provision of this agreement. If you do not agree to abide by the above, please do not use this service.
        </p>
      </section>

      <section class="modal-section">
        <h3>2. Description of Service</h3>
        <p class="mb-3">
          Fovestta provides cloud-based Human Resources management software that includes but is not limited to:
        </p>
        <ul class="service-list">
          <li>Employee information management</li>
          <li>Payroll processing and management</li>
          <li>Time and attendance tracking</li>
          <li>Performance management tools</li>
          <li>Recruitment and onboarding features</li>
          <li>Reporting and analytics</li>
          <li>Multi-company management capabilities</li>
        </ul>
      </section>

      <section class="modal-section">
        <h3>3. User Accounts and Registration</h3>
        <div class="subsection">
          <p><strong>3.1 Account Creation:</strong> You must provide accurate, current, and complete information during registration and maintain the accuracy of such information.</p>
          <p><strong>3.2 Account Security:</strong> You are responsible for maintaining the confidentiality of your account credentials and for all activities that occur under your account.</p>
          <p><strong>3.3 Account Termination:</strong> We reserve the right to terminate accounts that violate these terms or remain inactive for extended periods.</p>
        </div>
      </section>

      <section class="modal-section">
        <h3>4. Data Ownership and Responsibility</h3>
        <div class="subsection">
          <p><strong>4.1 Your Data:</strong> You retain ownership of all data you input into the Service, including employee information, payroll data, and company records.</p>
          <p><strong>4.2 Data Accuracy:</strong> You are responsible for the accuracy, quality, and legality of your data and the means by which you acquired such data.</p>
          <p><strong>4.3 Data Export:</strong> You may export your data at any time during your subscription period and for 30 days after termination.</p>
        </div>
      </section>

      <section class="modal-section">
        <h3>5. Payment Terms</h3>
        <div class="subsection">
          <p><strong>5.1 Subscription Fees:</strong> Service fees are billed in advance on a monthly or annual basis according to your chosen plan.</p>
          <p><strong>5.2 Free Trial:</strong> New users receive a 30-day free trial with full access to premium features.</p>
          <p><strong>5.3 Refunds:</strong> Refunds are provided according to our refund policy, available upon request.</p>
        </div>
      </section>

      <section class="modal-section">
        <h3>6. Contact Information</h3>
        <div class="contact-info">
          <p>If you have any questions about these Terms of Service, please contact us:</p>
          <div class="contact-box">
            <p><strong>Email:</strong> legal&#64;fovestta.com</p>
            <p><strong>Phone:</strong> [Your Phone Number]</p>
          </div>
        </div>
      </section>
    </div>
  </div>
</div>

<!-- Privacy Policy Modal -->
<div class="modal-overlay" *ngIf="showPrivacyModal" (click)="closePrivacyModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Privacy Policy</h2>
      <button class="close-button" (click)="closePrivacyModal()">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div class="modal-body">
      <div class="text-center mb-6">
        <img src="../assets/img/fovesta.png" alt="Fovestta HR Software" class="logo-img" />
        <p class="last-updated">Last updated: {{getCurrentDate()}}</p>
      </div>

      <section class="modal-section">
        <h3>1. Introduction</h3>
        <p>
          Fovestta HR Software ("we," "our," or "us") is committed to protecting your privacy. This Privacy Policy
          explains how we collect, use, disclose, and safeguard your information when you use our HR management
          platform. We comply with applicable data protection laws, including GDPR, CCPA, and other regional privacy
          regulations.
        </p>
      </section>

      <section class="modal-section">
        <h3>2. Information We Collect</h3>
        <div class="subsection">
          <h4>2.1 Information You Provide</h4>
          <ul class="service-list">
            <li><strong>Account Information:</strong> Name, email address, phone number, company details, job title</li>
            <li><strong>Employee Data:</strong> Personal information, employment records, payroll data, performance reviews</li>
            <li><strong>Payment Information:</strong> Billing address, payment method details (processed securely by third-party providers)</li>
            <li><strong>Communication Data:</strong> Support tickets, feedback, and correspondence with our team</li>
          </ul>
          
          <h4>2.2 Information We Collect Automatically</h4>
          <ul class="service-list">
            <li><strong>Usage Data:</strong> How you interact with our Service, features used, time spent</li>
            <li><strong>Device Information:</strong> IP address, browser type, operating system, device identifiers</li>
            <li><strong>Log Data:</strong> Server logs, error reports, performance metrics</li>
            <li><strong>Cookies and Tracking:</strong> Session cookies, preference cookies, analytics cookies</li>
          </ul>
        </div>
      </section>

      <section class="modal-section">
        <h3>3. How We Use Your Information</h3>
        <div class="subsection">
          <p><strong>3.1 Service Provision:</strong></p>
          <ul class="service-list">
            <li>Provide and maintain our HR management platform</li>
            <li>Process payroll and manage employee records</li>
            <li>Generate reports and analytics</li>
            <li>Facilitate communication within your organization</li>
          </ul>
          
          <p><strong>3.2 Account Management:</strong></p>
          <ul class="service-list">
            <li>Create and manage user accounts</li>
            <li>Authenticate users and prevent unauthorized access</li>
            <li>Process payments and manage subscriptions</li>
            <li>Provide customer support</li>
          </ul>
        </div>
      </section>

      <section class="modal-section">
        <h3>4. Data Security</h3>
        <div class="subsection">
          <p><strong>4.1 Security Measures:</strong></p>
          <ul class="service-list">
            <li>Industry-standard encryption for data in transit and at rest</li>
            <li>Multi-factor authentication and access controls</li>
            <li>Regular security audits and penetration testing</li>
            <li>Employee training on data protection practices</li>
            <li>Secure data centers with physical access controls</li>
          </ul>
        </div>
      </section>

      <section class="modal-section">
        <h3>5. Your Rights and Choices</h3>
        <div class="subsection">
          <p><strong>5.1 Access and Control:</strong></p>
          <ul class="service-list">
            <li><strong>Access:</strong> Request access to your personal information</li>
            <li><strong>Correction:</strong> Update or correct inaccurate information</li>
            <li><strong>Deletion:</strong> Request deletion of your personal information</li>
            <li><strong>Portability:</strong> Export your data in a machine-readable format</li>
          </ul>
          <p><strong>5.2 Exercising Your Rights:</strong> Contact us at privacy&#64;fovestta.com to exercise any of these rights. We will respond within 30 days.</p>
        </div>
      </section>

      <section class="modal-section">
        <h3>6. Contact Us</h3>
        <div class="contact-info">
          <p>If you have any questions about this Privacy Policy, please contact us:</p>
          <div class="contact-box">
            <p><strong>Privacy Officer:</strong> privacy&#64;fovestta.com</p>
            <p><strong>General Inquiries:</strong> support&#64;fovestta.com</p>
            <p><strong>Phone:</strong> [Your Phone Number]</p>
          </div>
        </div>
      </section>
    </div>
  </div>
</div>


      <div class="button-row full-width" style="margin-top: 0px;">
        <button mat-stroked-button (click)="prevStep()" class="back-button">
          Back
        </button>
        <button mat-flat-button color="primary" class="continue-button" 
          (click)="onSubmit()" [disabled]="!reviewFormGroup.valid">
          Go to Dashboard
        </button>
      </div>
    </form>
  </div>

  <!-- Success Step -->
  <div *ngIf="isCompleted" class="success-content">

    <!-- <button mat-flat-button color="primary" class="dashboard-button" (click)="startDashboard()">
      Go to Dashboard <mat-icon>arrow_forward</mat-icon>
    </button> -->
  </div>
</div>